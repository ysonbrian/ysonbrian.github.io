---
date: '2023-06-25'
title: 'Web3js를 알아보자'
categories: ['BlockChain']
summary: 'Web3js를 알아보자'
thumbnail: './block5.jpg'
---

# Web3js

web3.js 라이브러리는 이더리움 생태계를 위한 기능을 포함하는 모듈 모음이다.
그렇다면 이 모듈에는 어떤 것들이 있을까?

- `web3-eth`: 이더리움 블록체인과 스마트 컨트랙트 모듈
- `web3-shh`: P2P 커뮤니케이션과 브로드캐스트를 위한 위스퍼 프로토콜 모듈
- `web3-bzz`: 탈중앙화 파일 스토리지를 위한 스왐 프로토콜 모듈
- `web3-utils`: dApp 개발자를 위한 유용한 헬퍼 함수들을 모아둔 모듈

이더리움을 사용한 블록체인 어플리케이션을 개발하는 것은 솔리디티 언어를 사용하여 스마트 컨트랙트를 개발하고 블록체인과 상호작용 하는 클라이언트를 개발하는데 사용한다.
Web3.js를 통해 다른 계정으로 이더를 전송, 스마트 컨트랙트에서 데이터를 활용하여 다양한 것들을 할 수 있게 도와주는 라이브러리 이다. 기본적으로 Web3.js는 JSON **RPC(Remote PRocedure Call)**를 사용 하여 소통하며 이더리움 네트워크에 있는 노드의 데이터를 읽거나 써야 할때 RPC를 사용해 하나의 이더리움 노드에게 요청을 보낸다.

---

### 왜 Web3js가 필요 할까?

기존 Web2는 구글, 페이스북, 아마존, 삼성, 애플과 같은 소수의 대기업들이 만든 플랫폼을 사용하기 위해 사용자는 자신의 개인 정보를 플랫폼에 제공해야 하는데 이것은 사용자가 플랫폼을 사용하는대신 기업은 개인 정보를 이용해 광고를 하는 등 수익을 낸다. 이 플랫폼들은 중앙집중형으로 구성되어 있는 데이터베이스에 유저의 정보를 유지보수 하기 때문에 이 데이터베이스 관리자는 유저의 정보를 언제든 악용 할 수도 있다. 실제로 과거 페이스북이 330만명의 개인정보를 유출 당했고 아마존 클라우드에서 야놀자 개인정보도 보안을 소홀히 하여 유출 당했다. 지금도 우리의 개인정보는 언제든 유출 될 위험속에 살고 있는 것이다. **Web3**는 이것을 해결 하기위해 등장 하였는데, 중앙집중형 플랫폼을 벗어나 모든 참여자가 플랫폼이 되어 모든 데이터를 공유하고 동시에 암호화 기술을 사용하기 때문에 개인정보를 제공 하지 않는다. 중개인이 사라지고 개인이 직접 모든 것을 하는 시대를 만들 수 있다.

---

### Web3의 장점

- 네트워크에 참여하는 누구나 서비스를 사용하기 위한 권한을 가진다. 반대로 말하자면, 그 누구도 허가를 받을 필요가 없다.
- 누구도 특정 사용자가 서비스에 접근하지 못하도록 막거나 거부할 수 없다.
- 결제는 자체 토큰(이더 등)을 사용한다.
- Web2 플랫폼인 트위터나 페이스북은 중앙 집중화 되어 있기 때문에 관리자가 계정이나 게시글을 검열할 수 있지만, Web3 기반 dApp은 탈중앙화 되어 있기 때문에 누군가가 게시글을 검열하는 것이 불가능 하다.
- Web2 어플리케이션은 중앙 서버가 다운되면 해당 서비스 사용자들이 서비스를 이용하지 못하게 되지만, Web3 서버는 수천 대의 노드로 구성된 분산형 네트워크이기 때문에 특정 노드가 죽어도 서비스는 계속 유지 된다.

---

### Web3js 사용법

Web3-eth 패키지는 이더리움 블록체인과 스마트 컨트랙트를 상호작용 할 수 있게 도와준다.

```javascript
var Eth = require('web3-eth')

// "Eth.providers.givenProvider" 브라우저에 이더리움이 제공 된다면 사용 가능하다
var eth = new Eth(Eth.givenProvider || 'ws://some.local-or-remote.node:8546')

var Web3 = require('web3')
var web3 = new Web3(Web3.givenProvider || 'ws://some.local-or-remote.node:8546')

// -> web3.eth
```

**getBlock**
블록 주소 혹은 블록 해시값을 넣어주면 해당하는 정보를 출력해준다.

```javascript
web3.eth.getBlock(3150)
.then(console.log);

> {
    "number": 3,
    "hash": "0xef95f2f1ed3ca60b048b4bf67cde2195961e0bba6f70bcbea9a2c4e133e34b46",
    "parentHash": "0x2302e1c0b972d00932deb5dab9eb2982f570597d9d42504c05d9c2147eaf9c88",
    "nonce": "0xfb6e1a62d119228b",
    "sha3Uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "transactionsRoot": "0x3a1b03875115b79539e5bd33fb00d8f7b7cd61929d5a3c574f507b8acf415bee",
    "stateRoot": "0xf1133199d44695dfa8fd1bcfe424d82854b5cebef75bddd7e40ea94cda515bcb",
    "miner": "0x8888f1f195afa192cfee860698584c030f4c9db1",
    "difficulty": '21345678965432',
    "totalDifficulty": '324567845321',
    "size": 616,
    "extraData": "0x",
    "gasLimit": 3141592,
    "gasUsed": 21662,
    "timestamp": 1429287689,
    "transactions": [
        "0x9fc76417374aa880d4449a1f7f31ec597f00b1f6f3dd2d66f4c9c6c445836d8b"
    ],
    "uncles": []
}
```

**getBalance**
어카운트 주소를 넣어주면 가지고 있는 이더 값을 보여준다.

```javascript
web3.eth.getBalance("0x407d73d8a49eeb85d32cf465507dd71d507100c1")
.then(console.log);
> "1000000000000"
```

**getTransaction**
트랜잭션 해시값을 넣어주면 트랜잭션의 상세 정보를 보여준다.

```javascript
web3.eth.getTransaction('0x9fc76417374aa880d4449a1f7f31ec597f00b1f6f3dd2d66f4c9c6c445836d8b§234')
.then(console.log);

> {
    "hash": "0x9fc76417374aa880d4449a1f7f31ec597f00b1f6f3dd2d66f4c9c6c445836d8b",
    "nonce": 2,
    "blockHash": "0xef95f2f1ed3ca60b048b4bf67cde2195961e0bba6f70bcbea9a2c4e133e34b46",
    "blockNumber": 3,
    "transactionIndex": 0,
    "from": "0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b",
    "to": "0x6295ee1b4f6dd65047762f924ecd367c17eabf8f",
    "value": '123450000000000000',
    "gas": 314159,
    "gasPrice": '2000000000000',
    "input": "0x57cb2fc4"
}
```
